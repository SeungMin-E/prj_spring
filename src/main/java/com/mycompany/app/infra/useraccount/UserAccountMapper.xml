<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

    <mapper namespace = "com.mycompany.app.infra.useraccount.UserAccountMapper">
    
    <resultMap id="resultMapObj" type="com.mycompany.app.infra.useraccount.UserAccount" />
    
    	<sql id="user_val">
    		seq
    		, userID
    		, userPW
    		, userName
    		, userAge
    		, gender
    		, userStatus
    	</sql>
    	
    	<sql id="user_db">
    		FROM
    			userAccount
    		WHERE 1=1 
    			AND userName LIKE CONCAT('%',#{userNameWord},'%') 
    	</sql>
    	
    	<select id="selectOneCount" resultType="Integer">
			SELECT count(*)
			<include refid="user_db" />
		</select>
    	
    	<select id="userAll" resultMap="resultMapObj">
    		SELECT aa.* FROM (   	
	   		SELECT
				<include refid="user_val" />
	   			<include refid="user_db" />
			) aa
			LIMIT #{rowNumToShow} OFFSET #{startRnumForMysql}	   
    	</select>
    	
    	<select id="userOne" resultMap="resultMapObj">
    		SELECT
    			<include refid="user_val" />
    		FROM
    			userAccount
    		WHERE 1=1
    			AND seq = #{seq}
    	</select>
    	
    	<insert id="userJoin">
    		INSERT INTO
    			userAccount
    		(
    			userID
    			, userPW
    			, userName
    			, userAge
    			, gender
    			, userStatus
    		)VALUES(
				#{userID}
				, #{userPW}
				, #{userName}
				, #{userAge}
				, #{gender}
				, 0
    		)
    	</insert>
    	
    	<update id="userUpdate">
    		UPDATE userAccount
    		SET
    			userPW = #{userPW}
    			userName = #{userName}
    			userAge = #{userAge}
    			gender = #{gender}
    		WHERE 1=1
    			AND seq = #{seq}
    	</update>
    	
    	<update id="userUelete">
    		UPDATE userAccount
    		SET
    			userStatus = 1
    		WHERE 1 = 1
    			AND seq = #{seq}
    	</update>
    	
    	<delete id="userCut">
    		DELETE FROM
    			userAccount
    		WHERE
    			seq = #{seq}
    	</delete>
    
    </mapper>