<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
  <!-- 전체 매퍼중에서 유일한 값을 사용해야한다. 해서 관계적으로 해당 파일의 패스와 파일이름(확장제외) 그리고 dao에서 namespace와 일치해야한다. -->
	<mapper namespace="com.mycompany.app.infra.member.MemberMapper">

		<!-- select 결과를 받을 객체 -->		   
		<resultMap id="resultMapObj" type="com.mycompany.app.infra.member.Memeber"></resultMap>
		
		<sql id = "memberAbc">
			seq
			, userId
			, userPw
			, userName
			, userAge
			, gender
			, userStatuse
		</sql>
		
		<sql id = "memberCommon">
			FROM
				userAccount
			WHERE 1=1
				<if test="nameKeyWord != null and !nameKeyWord.equals('')">AND userName LIKE CONCAT('%',#{!nameKeyWord} ,'%') </if>
		</sql>
		
		<select id="selectMemberCount" resultMap="Integer">
			SELECT count(*)
			<include refid="memberCommon" /> 
		</select>
		
		<select id="selectMemeberList" resultMap="resultMapObj">
			SELECT aa.* FROM(
				SELECT
					<include refid="memberAbc"/>
					<include refid="memberCommon"/>
			)aa
			LIMIT #{rowNumToShow} OFFSET #{startRnumForMysql}
		</select>
		
		<select id="memberSelectOne">
			SELECT
				<include refid="memberAbc"/>
			FROM
				userAccount
			WHERE 1 = 1
				AND userName =  #{nameKeyWord}
		</select>
		
		<insert id="memberJoin">
			INSERT INTO userAccount (
				 userId
				, userPw
				, userName
				, userAge
				, gender
				, userStatuse
			) VALUES (
				#{userId}
				, #{userPw}
				, #{userName}
				, #{userAge}
				, #{gender}
				, #{userStatuse}
			)
			 
		</insert>
		
		<update id="">
			UPDATE
		</update>
    	
    	<update id="uelete">
    		
    	
    	</update>
    	
    	<delete id="">
    		
    	</delete>
    	
	</mapper>